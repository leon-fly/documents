---
date: "2018-01-01"
draft: false
lastmod: "2018-01-01"
publishdate: "2018-01-01"
tags:
- middleware
- redis
title: rediså®‰è£…åŠå¸¸ç”¨å‘½ä»¤

---

## 1. å®‰è£…åŠå¯åŠ¨

[å®˜æ–¹å®‰è£…æŒ‡å—](https://redis.io/download)

* ä¸‹è½½è§£å‹ç¼–è¯‘

  ```
  $ wget http://download.redis.io/releases/redis-5.0.7.tar.gz
  $ tar xzf redis-5.0.7.tar.gz
  $ cd redis-5.0.7
  $ make
  ```

* æœåŠ¡å¯åŠ¨

  ```
  $ src/redis-server
  ```

* å®¢æˆ·ç«¯è¿æ¥

  > redis-cli -h host -p port -a password  

  > é›†ç¾¤æ¨¡å¼ä¸‹éœ€è¦åŠ å‚æ•° -c è¿™æ ·ç¡®ä¿æ•°æ®ä¸åœ¨å½“å‰åˆ†ç‰‡æ—¶å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ã€‚

  é»˜è®¤ç«¯å£6379

  ```
  $ src/redis-cli
  redis> set foo bar
  OK
  redis> get foo
  "bar"
  ```

* å…³é—­æœåŠ¡
  é€šè¿‡redis-cliè¿æ¥åˆ°æœåŠ¡ä¹‹åæ‰§è¡Œshutdown

* å®¢æˆ·ç«¯

  * éå®˜ç½‘å…è´¹å¥½ç”¨redis å®¢æˆ·ç«¯: [AnotherRedisDesktopManager](https://github.com/qishibo/AnotherRedisDesktopManager) , æ”¯æŒmacä¸pc


## 2. æ•°æ®ç±»å‹åŠå¸¸ç”¨å‘½ä»¤

[å®˜æ–¹å‘½ä»¤æ¸…å•](https://redis.io/commands#)
[ä¸­æ–‡ç‰ˆå‘½ä»¤å‚è€ƒ](http://redisdoc.com/)

redisé»˜è®¤å†…éƒ¨16ä¸ªå­åº“ï¼Œé€šè¿‡selectå‘½ä»¤è¿›è¡Œåº“çš„åˆ‡æ¢ã€‚é»˜è®¤æ˜¯ç”¨0å·ç´¢å¼•åº“å¦‚ï¼š

> select 5

### 2.1. String

* å¯ä»¥å­˜å‚¨å­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹ï¼ˆæ•´å‹å’Œæµ®ç‚¹å‹ï¼Œæ•´å½¢æ”¯æŒé•¿åº¦ç›¸å½“äºlongï¼Œæµ®ç‚¹å‹ç›¸å½“äºdoubleï¼‰ã€‚
* å­—ç¬¦ä¸²æ”¯æŒè¿½åŠ ï¼Œé•¿åº¦ï¼ŒæŒ‡å®šæˆªå–ç­‰æ“ä½œã€‚
* æ•°å­—ç±»å‹æ”¯æŒæ•°æ®åŠ å‡æŒ‡å®šå€¼ã€‚

è®¾ç½®

> SET key value 

> MSET [key value]...  ä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªï¼Œé«˜æ•ˆ

> SETNX key value   ä»…å½“ä¸å­˜åœ¨æ—¶è®¾ç½®

> MSETNX [key value]... ä»…å½“ä¸å­˜åœ¨æ—¶è®¾ç½®ï¼Œä¸€æ¬¡è®¾ç½®å¤šä¸ª

> GETSET key value  è®¾ç½®å€¼å¹¶è¿”å›åŸæœ‰å€¼

è·å– 

> GET key

> MGET key...

è¿½åŠ 

> APPEND key value

è·å–å­ä¸²

> GETRANGE key start end

è®¾ç½®å­ä¸²

> SETRANGE key offset value

è·å–å­—ç¬¦ä¸²é”®å€¼é•¿

> STRLEN key

è‡ªå¢1

> INCR key

å¢åŠ N

> INCRBY key N

è‡ªå‡1

> DECR key

è‡ªå‡N

> DECRBY key N

**ä½¿ç”¨åœºæ™¯ï¼š**

* å¸¸è§„æ•°æ®ç¼“å­˜ï¼ˆsession, token, åºåˆ—å·çš„å¯¹è±¡ï¼‰
* è®¡æ•°æ¯”å¦‚ç”¨æˆ·å•ä½æ—¶é—´å†…è¯·æ±‚æ•°ï¼Œé¡µé¢è®¿é—®æ•°
* åˆ†å¸ƒå¼é”

### 2.2. åˆ—è¡¨ï¼ˆlist , é“¾è¡¨ï¼‰

* æ”¯æŒä»åˆ—è¡¨å·¦è¾¹æˆ–è€…å³è¾¹æ¨å…¥æˆ–æ¨å‡ºå…ƒç´ ï¼Œæ”¯æŒæŒ‡å®šä½ç½®å€¼è®¾ç½®ï¼ŒæŒ‡å®šä½ç½®å‰æ’å…¥
* æ”¯æŒè·å–æŒ‡å®šä½ç½®ï¼ŒæŒ‡å®šèŒƒå›´å…ƒç´ 
* æ”¯æŒä¿®å‰ªå…ƒç´ ï¼Œä¿ç•™æŒ‡å®šèŒƒå›´

**å‘½ä»¤ä»¥L|Ræ‰“å¤´ï¼ŒLä»£è¡¨Leftï¼ŒRè¡¨ç¤ºRight**

å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ | å°¾éƒ¨

> LPUSHï½œRPUSH key value...  

å°†ä¸€ä¸ªå€¼ä»å¤´éƒ¨ ï½œå°¾éƒ¨ç§»é™¤

> LPOP|RPOP key  

é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ 

> LINDEX key offset   

è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ 

> LRANGE key start end  

 å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚

> LTRIM key start end 

è·å–åˆ—è¡¨é•¿åº¦

> LLEN key  

### 2.3. é›†åˆ (set)

* æ— åºï¼Œä¸å¯é‡å¤ï¼Œæ”¯æŒå¿«é€Ÿå¯¹å…ƒç´ è¿›è¡Œæ“ä½œ
* æ”¯æŒæ·»åŠ å’Œç§»é™¤1ä¸ªæˆ–å¤šä¸ªå…ƒç´ 
* æ”¯æŒæŸ¥è¯¢é›†åˆå…ƒç´ æ•°é‡åŠæ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œæ”¯æŒè·å–éšæœºçš„å‡ ä¸ªå…ƒç´ 
* æ”¯æŒå…ƒç´ ç§»åŠ¨åˆ°å…¶ä»–é›†åˆ
* æ”¯æŒé›†åˆæ“ä½œï¼Œå¦‚äº¤é›†ã€å·®é›†ã€å¹¶é›†ç­‰

**å‘½ä»¤ä»¥Sæ‰“å¤´,Sè¡¨ç¤ºSET**
æ·»åŠ 

> SADD key item...

ç§»é™¤

> SREM key item...

å…ƒç´ æ˜¯å¦å­˜åœ¨

> SISMEMBER key item

å…ƒç´ æ•°é‡

> SCARD key

è·å–æ‰€æœ‰å…ƒç´ 

> SMEMBERS key

éšæœºè·å–1ä¸ªæˆ–å¤šä¸ªå…ƒç´ 

> SRANDMEMBER key count

éšæœºå¼¹å‡º1ä¸ªå…ƒç´ 

> SPOP key

é›†åˆé—´å…ƒç´ ç§»åŠ¨

> SMOVE soure-key dest-key item

å·®é›†ï¼ˆå­˜åœ¨äºç¬¬ä¸€ä¸ªé›†åˆè€Œä¸å­˜åœ¨å…¶ä»–é›†åˆï¼‰

> SDIFF key key...

è®¡ç®—å·®é›†å¹¶å­˜å‚¨åœ¨dest-keyä¸­

> SDIFFSTORE dest-key key key...


äº¤é›†è¿ç®—

> SINTER key key...

è®¡ç®—äº¤é›†å¹¶å­˜å‚¨

> SINTER dest-key key key...

å¹¶é›†è¿ç®—

> SUNION key key...

è®¡ç®—å¹¶é›†å¹¶å­˜å‚¨

> SUNION dest-key key key...

 **ğŸ‘‰  ä½¿ç”¨åœºæ™¯ï¼š**

* åˆ©ç”¨å…¶éšæœºæ€§è¿›è¡Œäº‹é¡¹æŠ½å¥–åŠŸèƒ½


### 2.4. æ•£åˆ— (hash)

**å‘½ä»¤ä»¥Hæ‰“å¤´**
è®¾ç½®å€¼

> HMSET key [key value]...

è·å–1ä¸ªæˆ–å¤šä¸ªé”®çš„å€¼

> HGET key key...

åˆ é™¤æ•£åˆ—é‡Œé¢ä¸€ä¸ªæˆ–å¤šä¸ªé”®

> HDEL key

è·å–æ•£åˆ—é‡Œé¢é”®å€¼å¯¹æ•°

> HLEN key

æ•£åˆ—ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®

> HEXISTS key key

è·å–æ•£åˆ—ä¸­æ‰€æœ‰çš„é”®

> HKEYS key

è·å–æ•£åˆ—ä¸­æ‰€æœ‰çš„å€¼

> HVALS key

è·å–æ•£è£‚ä¸­æ‰€æœ‰çš„é”®å€¼å¯¹

> HGETALL key

å°†æ•£åˆ—è¡¨ä¸­çš„æŒ‡å®šé”®çš„å€¼å¢åŠ 

> HINCRBY | HINCRBYFLOAT key key increment

**ğŸ‘‰ ä½¿ç”¨åœºæ™¯ï¼š**

* è´­ç‰©è½¦åœºæ™¯ï¼Œkeyä¸ºç”¨æˆ·idï¼Œå•†å“idä¸ºfieldï¼Œå•†å“æ•°é‡ä¸ºvalueã€‚å› ä¸ºè´­ç‰©è½¦çš„å˜åŒ–é¢‘ç¹æ€§å†³å®šä½¿ç”¨è¿™ç§ç±»å‹å­˜å‚¨æ¯”Stringæ›´ä¼˜ï¼ˆHashå¯ä»¥å¯¹å•ä¸ªå­—æ®µè¿›è¡Œä¿®æ”¹ï¼Œçµæ´»ï¼ŒèŠ‚çœæµé‡ï¼‰ã€‚


### 2.5. æœ‰åºé›†åˆï¼ˆsorted setï¼‰

ç»“æ„ç±»ä¼¼äºæ•£åˆ—è¡¨ï¼Œä¸å…è®¸é‡å¤çš„å…ƒç´ ï¼Œæœ‰åºé›†åˆé‡Œå­˜å‚¨ç€æˆå‘˜åŠæˆå‘˜å¯¹åº”åˆ†å€¼ï¼Œå¹¶ä¸”æä¾›åˆ†å€¼å¤„ç†å‘½ä»¤ï¼Œæ’åºè§„åˆ™å³é€šè¿‡åˆ†å€¼æ¥çš„ã€‚

**å‘½ä»¤ä»¥Zæ‰“å¤´ï¼Œé›†åˆè®¡ç®—Zå‘½ä»¤ä¸€èˆ¬æœ‰å¯¹åº”çš„ZREVï¼Œåˆ†æ•°é€†åºè®¡ç®—**

æ·»åŠ å¸¦åˆ†å€¼çš„æˆå‘˜

> ZADD key [score member]...

åˆ é™¤æˆå‘˜

> ZREM key member...

æˆå‘˜æ•°é‡

> ZCARD key

æˆå‘˜å€¼åŠ åˆ†

> ZINCRBY key increment member

è¿”å›åˆ†å€¼ä»‹äºminå’Œmaxä¹‹é—´çš„æˆå‘˜æ•°é‡

> ZCOUNT key min max

è¿”å›æˆå‘˜memberåœ¨é›†åˆä¸­çš„æ’å

> ZRANK key member ï¼ˆä»å°åˆ°å¤§ï¼Œé»˜è®¤ï¼‰
> ZREVRANK key member (ä»å¤§åˆ°å°)

è¿”å›æˆå‘˜memberçš„åˆ†å€¼

> ZSCORE key 

> ZPOPMAX key [count]

> ZPOPMIN key [count]

è¿”å›æœ‰åºé›†åˆä¸­æ’åä»‹äºstartå’Œstopä¹‹é—´çš„æˆå‘˜ï¼ŒæŒ‡å®šwithscoresé€‰é¡¹å°†åŒæ—¶è¿”å›åˆ†å€¼

> ZRANGE key start stop [WITHSCORES]
> ZREVRANGE start stop [WITHSCORES]

è¿”å›æœ‰åºé›†åˆä¸­åˆ†æ•°ä»‹äºminå’Œmaxä¹‹é—´çš„æˆå‘˜(æ³¨æ„æ­£åºå’Œååºçš„å‚æ•°å·®å¼‚)

> ZRANGEBYSCORE key min max [WITHSCORES]
> ZREVRANGEBYSCORE key max min [WITHSCORES]

ç§»é™¤é›†åˆå…ƒç´ ï¼Œæ ¹æ®åˆ†æ•°æˆ–æ’å

> ZREMRANGEBYSCORE key min max
> ZREMRANGEBYRANK key start stop

äº¤é›†å’Œå·®é›†

> ZINTERSTORE dest-key key key [WEIGHT weight...] [AGGREGATE SUM|MIN|MAX]
> ZUNIONSTORE dest-key key key [WEIGHT weight...] [AGGREGATE SUM|MIN|MAX]

**ğŸ‘‰ ä½¿ç”¨åœºæ™¯ï¼š**

* æ’è¡Œæ¦œï¼ˆå¦‚å¾®ä¿¡å¥½å‹æ­¥æ•°æ’è¡Œç‰ˆï¼Œç›´æ’­é—´é€ç¤¼ç‰©æ’è¡Œç‰ˆï¼Œè¯é¢˜çƒ­åº¦ç­‰ï¼‰

### 2.6  Geospatial indexes

Redis GEO ä¸»è¦ç”¨äºå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œå¹¶å¯¹å­˜å‚¨çš„ä¿¡æ¯è¿›è¡Œæ“ä½œã€‚æ­¤æ•°æ®ç»“æ„å¯¹äºæŸ¥æ‰¾ç»™å®šåŠå¾„æˆ–è¾¹ç•Œæ¡†å†…çš„é™„è¿‘ç‚¹éå¸¸æœ‰ç”¨ã€‚

**ğŸ‘‰  ä½¿ç”¨åœºæ™¯ï¼š**

* æ‰¾å‡ºæŸä¸ªä½ç½®é™„è¿‘çš„æ‰€æœ‰å•†åº—ï¼ˆå¯ä»¥æ‰¾å‡ºèŒƒå›´å†…çš„åœ°å€ï¼Œå¹¶æ˜¾ç¤ºè·ç¦»ï¼‰

### 2.7 Bitmap

è¿™å®é™…ä¸Šå¹¶ä¸æ˜¯çœŸæ­£çš„æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯åŸºäºstringå®ç°çš„ä½å›¾ã€‚

**ğŸ‘‰  ä½¿ç”¨åœºæ™¯ï¼š**

* [40äº¿qqå·å»é‡é—®é¢˜](https://www.cnblogs.com/chenfx/p/15710156.html#:~:text=%E7%94%A8hashmap%E5%8E%BB%E9%87%8D%E7%9A%84%E8%AF%9D%EF%BC%8C%E7%94%A8int%E7%B1%BB%E5%9E%8B2%2A%20%282%5E%2031%20-1%29%EF%BC%8C%E8%B4%9F%E6%95%B0%E4%B9%9F%E7%AE%97%E4%B8%8A%E3%80%82%20%E9%82%A3%E4%B9%88%E4%B8%80%E4%B8%AAint%E7%B1%BB%E5%9E%8B32%E4%BD%8D%EF%BC%8C4%E4%B8%AA%E5%AD%97%E8%8A%82%E3%80%82%20%E9%9C%80%E8%A6%81%E3%80%80%E3%80%8040%E4%BA%BF%2A4%2F1024%2F1024%2F1024%20%E2%89%88,14.9G%20%E8%BF%99%E8%BF%98%E6%98%AF%E4%B8%8D%E8%80%83%E8%99%91hash%E5%86%B2%E7%AA%81%E6%9C%80%E5%B0%91%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%81%20%E9%82%A3%E4%B9%88%E7%94%A8bitmap%E7%9A%84%E8%AF%9D%EF%BC%8C%E7%94%A81%E4%BD%8D%E8%A1%A8%E7%A4%BA1%E4%B8%AAqq%E5%8F%B7%E7%A0%81%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%20%E9%82%A3%E4%B9%888%E4%B8%AA%E4%BD%8D%E7%AD%89%E4%BA%8E1%E4%B8%AA%E5%AD%97%E8%8A%82%E3%80%82%20%E9%9C%80%E8%A6%81%E3%80%80%E3%80%8040%E4%BA%BF%2F8%2F1024%2F1024%2F1024%20%E2%89%88%200.466G%20%E5%8F%AA%E9%9C%80%E8%A6%81%E4%B8%8D%E5%88%B0512MB%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BA%86%EF%BC%81), ä½¿ç”¨bitmapå¯¹æ¯ä¸ªå·è¿›è¡Œæ ‡è¯†ï¼Œ1ä»£è¡¨å·²ç»å­˜åœ¨ï¼Œ0ä»£è¡¨ä¸å­˜åœ¨ã€‚

### 2.8 HyperLogLog

Redis HyperLogLog æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼ŒHyperLogLog çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ€»æ˜¯å›ºå®š çš„ã€å¹¶ä¸”æ˜¯å¾ˆå°çš„ã€‚åœ¨ Redis é‡Œé¢ï¼Œæ¯ä¸ª HyperLogLog é”®åªéœ€è¦èŠ±è´¹ 12 KB å†…å­˜ï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘ 2^64 ä¸ªä¸åŒå…ƒç´ çš„åŸº æ•°ã€‚è¿™å’Œè®¡ç®—åŸºæ•°æ—¶ï¼Œå…ƒç´ è¶Šå¤šè€—è´¹å†…å­˜å°±è¶Šå¤šçš„é›†åˆå½¢æˆé²œæ˜å¯¹æ¯”ã€‚

| 1    | [PFADD key element [element ...\]](https://www.runoob.com/redis/hyperloglog-pfadd.html) æ·»åŠ æŒ‡å®šå…ƒç´ åˆ° HyperLogLog ä¸­ã€‚ |
| ---- | ------------------------------------------------------------ |
| 2    | [PFCOUNT key [key ...\]](https://www.runoob.com/redis/hyperloglog-pfcount.html) è¿”å›ç»™å®š HyperLogLog çš„åŸºæ•°ä¼°ç®—å€¼ã€‚ |
| 3    | [PFMERGE destkey sourcekey [sourcekey ...\]](https://www.runoob.com/redis/hyperloglog-pfmerge.html) å°†å¤šä¸ª HyperLogLog åˆå¹¶ä¸ºä¸€ä¸ª HyperLogLog |

**ğŸ‘‰ ä½¿ç”¨åœºæ™¯**ï¼š

* åŒ¿åæ•°æ®ç»Ÿè®¡ï¼Œå¦‚å“ªäº›ä¸é‡å¤ç”¨æˆ·å¯¹æŸç½‘é¡µçš„è®¿é—®é‡ï¼Œæ­Œæ›²/è§†é¢‘æ’­æ”¾é‡ç­‰ã€‚





## 3. å…¶ä»–å¸¸ç”¨å‘½ä»¤


### 3.1 äº‹åŠ¡å‘½ä»¤

* WATCH,ç›‘è§†æŒ‡å®škeyï¼Œé…åˆMULTI...EXECä½¿ç”¨ï¼Œå¦‚æœwatché”®å€¼å˜åŒ–åˆ™äº‹åŠ¡å¤±è´¥

> WATCH key...

* UNWATCH,é‡ç½®è¿æ¥,ä¸åœ¨ç›‘è§†ã€‚
* MULTI redisäº‹ç‰©å¼€å¯æ ‡è¯†ï¼Œè¯¥å‘½ä»¤ä¹‹åï¼ŒEXECä¹‹å‰çš„å‘½ä»¤å°†å­˜å‚¨åœ¨redisçš„æ‰§è¡Œé˜Ÿåˆ—ï¼Œè°ƒç”¨EXECä¹‹åæ‰ä¼šè¿ç»­æ‰§è¡Œé˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ã€‚
* EXEC äº‹ç‰©æ‰§è¡Œ
* DISCARD è¯¥å‘½ä»¤ç”¨åœ¨MULTIä¹‹åï¼ŒEXECä¹‹å‰ï¼Œå‘½ä»¤ä¹‹å‰çš„å†…å®¹å°†è¢«é‡ç½®ä¸¢å¼ƒã€‚

### 3.2 è°ƒè¯•å‘½ä»¤

* PING

* ECHO

* OBJECT
  é€šè¿‡OBJECTå‘½ä»¤å¯ä»¥ä»å†…éƒ¨å¯Ÿçœ‹ç»™å®š key çš„ Redis å¯¹è±¡ï¼Œå®ƒé€šå¸¸ç”¨åœ¨é™¤é”™(debugging)æˆ–è€…äº†è§£ä¸ºäº†èŠ‚çœç©ºé—´è€Œå¯¹ key ä½¿ç”¨ç‰¹æ®Šç¼–ç çš„æƒ…å†µã€‚ å½“å°†Redisç”¨ä½œç¼“å­˜ç¨‹åºæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ OBJECT å‘½ä»¤ä¸­çš„ä¿¡æ¯ï¼Œå†³å®š key çš„é©±é€ç­–ç•¥(eviction policies)ã€‚

    > OBJECT  subcommand [arguments...]
    > å¯é€‰çš„subcommandä¸ºï¼š
    >
    > * OBJECT REFCOUNT key
    > * OBJECT ENCODING key  
    > * OBJECT IDLETIME key è¿”å›ç©ºé—²æ—¶é—´,ä»¥ç§’ä¸ºå•ä½
    > * OBJECT REFQ key
    > * OBJECT HELP

* DEBUG OBJECT key
  ç”¨äºæœåŠ¡ä¼˜åŒ–æ—¶æŸ¥è¯¢keyç›¸å…³çš„å†…éƒ¨æ•°æ®ï¼Œå¦‚æ•°æ®ç¼–ç 

* SLOWLOG
  ç”¨äºè®°å½•æ…¢æŸ¥è¯¢çš„æ—¥å¿—

    * å¯è®¾ç½®è¦è®°å½•çš„æŸ¥è¯¢æœ€ä½è€—æ—¶å’Œæœ€å¤§æ—¥å¿—è®°å½•æ•°ï¼Œæ—¥å¿—è®°å½•é‡‡ç”¨é˜Ÿåˆ—æ–¹å¼ï¼Œå½“æ—¥å¿—è®°å½•è¶…è¿‡æœ€å¤§æ—¥å¿—è®°å½•æ•°ï¼Œè€çš„è®°å½•å…ˆåˆ æ‰
    * å¯ä»¥è·å–å½“å‰æ—¥å¿—è®°å½•ï¼Œå½“å‰è®°å½•æ•°
    * å¯ä»¥æƒ…å†µå½“å‰æ—¥å¿—è®°å½•

* MONITOR
  ç”¨äºç›‘æ§redisæ¥æ”¶åˆ°çš„æ‰§è¡Œå‘½ä»¤ï¼Œè¯¥å‘½ä»¤å¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œå¯åŠ¨ä¸€ä¸ªç›‘æ§å‘½ä»¤å¯èƒ½é™ä½æœåŠ¡åå50%ç”šè‡³æ›´å¤šã€‚

* INFO
  è¯¥å‘½ä»¤åŒ…å«çš„redisæœåŠ¡å™¨çš„å½“å‰çŠ¶æ€æœ‰å…³çš„ä¿¡æ¯

### 3.3 æ•…éšœå¤„ç†å‘½ä»¤

* redis-check-aof
* redia-check-dump

### 3.4 å…¶ä»–å¸¸ç”¨å‘½ä»¤

åˆ—å‡ºåŒ¹é…çš„é”®åˆ—è¡¨

> KEYS pattern

éšæœºè·å–ä¸€ä¸ªkey

> RANDOMKEY

æ¸…ç©ºåº“(æ…ç”¨)

> FLUSHDB

æŸ¥çœ‹é”®å€¼ä¸ªæ•°

> DBSIZE

è¿­ä»£è·å–é”®åˆ—è¡¨,è¿”å›å€¼åŒ…å«ä¸¤åˆ—æ•°æ®ï¼Œç¬¬ä¸€åˆ—ä¸ºä¸‹ä¸€æ¬¡è¿­ä»£å‚æ•°ï¼Œç¬¬äºŒåˆ—ä¸ºå½“å‰è¡¨é¡µæ•°æ®,é»˜è®¤æ¯é¡µè¿”å›10ï¼Œå¯ä»¥ä½¿ç”¨countå‚æ•°æŒ‡å®šæ¯é¡µå¤§å°ï¼Œæ¯é¡µè¿”å›çš„æ•°æ®ç­‰äºæˆ–è€…ç•¥å¤§äºè¯¥æ•°ï¼›ä½¿ç”¨MATCHå‚æ•°è¿‡æ»¤è¿”å›æ•°æ®æ»¡è¶³åŒ¹é…å†…å®¹

> SCAN num [COUNT num] [MATCH pattern]

HSCAN | SSCAN | ZSCANä½¿ç”¨æ–¹å¼ç±»ä¼¼SCANï¼Œåªæ˜¯éœ€è¦æŒ‡å®škey

> HSCAN | SSCAN | ZSCAN num [COUNT num] [MATCH pattern]

åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé”®

> DEL key...

è¿”å›å­˜åœ¨çš„é”®çš„ä¸ªæ•°

> EXISTS key...

é‡å‘½åkey

> RENAME key newkey
> RENAMENX key newkey (newkeyä¸å­˜åœ¨ï¼Œå³ä¸ä¼šè¦†ç›–åŸkey)

è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´/æ—¶é—´ç‚¹ï¼ˆå‘½ä»¤ä¸­å¸¦ATä¸ºæ—¶é—´ç‚¹ï¼‰

> EXPIRE key seconds
> EXPIREAT key timestamp
> PEXPIRE key millseconds
> PEXPIREAT key timestamp

ç§»åŠ¨keyåˆ°å¦ä¸€ä¸ªdb

> MOVE key db

ç§»é™¤keyçš„è¿‡æœŸæ—¶é—´

> PERSIST key

è·å–é”®è¿‡æœŸæ—¶é—´

> PTTL key  (ä»¥å¾®ç§’ä¸ºå•ä½)
> TTL key ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰

æ›´æ–°ä¸€ä¸ªæˆ–å¤šä¸ªkeyçš„æœ€åè®¿é—®æ—¶é—´

> TOUCH key...

æ’åº

> SORT key [BY pattern] [LIMIT offset count] [GET pattern [GET pattern â€¦]] [ASC | DESC] [ALPHA] [STORE destination]

[å‚è€ƒ - redisé…ç½®](https://zhuanlan.zhihu.com/p/50101602)



## 3.5 å¤åˆ¶é›†å‘½ä»¤



## 3.6 sentinel å¸¸ç”¨å‘½ä»¤

[å®˜ç½‘å®Œæ•´](https://redis.io/topics/sentinel)

## 3.7 é›†ç¾¤å‘½ä»¤
