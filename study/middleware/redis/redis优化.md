---
date: "2018-01-01"
draft: false
lastmod: "2018-01-01"
publishdate: "2018-01-01"
tags:
- middleware
- redis
title: redis优化
---

## 1. 性能优化
* 查看机器运行redis进行各项服务性能，该性能仅为执行计算命令性能，不包括对客户端的应答，实际客户端不使用pipeline的情况下大概有测试结果的50%～60%，如果达不到该性能指标要关注是否每次发送命令时都创建了新连接。redis提供的性能测试工具redis-benchmark,示例如下（测试核心操作的性能）：
    > redis-benchmark -c 1 -q
* 通信优化
    * 使用一次性多值处理命令代替单值处理命令
    * 使用pipeline
    * 主从模式下主节点不要有过多从节点
* 硬件提升
    * 内存
    * 存储磁盘，如SSD
    * 宽带
* 使用连接池，不要每次都新建连接

## 2. 内存空间优化
* 短结构
    * 压缩列表表示（列表、hash、有序集合）
        * 包含两个配置选项，允许包含最大元素数量，压缩列表每个节点的最大体积占用字节
        * 当任意一个配置选项被突破，redis将使用其他结构，内存也会因此增加。
* 分片结构
待续 ...